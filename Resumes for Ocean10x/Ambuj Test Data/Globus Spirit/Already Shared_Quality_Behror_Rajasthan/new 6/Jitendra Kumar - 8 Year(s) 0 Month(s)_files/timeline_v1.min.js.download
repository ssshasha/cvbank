!function(){function a(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b}function b(a){for(var b={},c=a.length-1;c>=0;c--)b[c]=a[c];return b}function c(a){var b=[];for(var c in a)b.push(a[c]);return b}function d(a){var d=c(a.companies);if(d.length<=10&&a.totalTime.months<=180)return a;d.length>10&&(d=d.slice(d.length-10,d.length)),a.companies={};for(var e=d.length-1;e>=0;e--)a.companies[e]=d[e];if(a.totalTime.startDate=a.companies[0].startDate,f(a.totalTime.startDate,a.totalTime.endDate)+1>180){a.companies={};var g=new Date(a.totalTime.endDate),h="";h=new Date(g.setMonth(g.getMonth()-179));for(var e=d.length-1;e>=0;e--)if(new Date(d[e].endDate)>=h&&(a.companies[e]=d[e],a.totalTime.startDate=d[e].startDate,a.totalTime.months=f(a.totalTime.startDate,a.totalTime.endDate)+1),new Date(d[e].startDate)<=h&&new Date(d[e].endDate)>=h){a.companies[e].months=a.companies[e].months-f(new Date(d[e].startDate),h),a.totalTime.startDate=h,a.totalTime.months=f(a.totalTime.startDate,a.totalTime.endDate)+1;break}if($("body").hasClass("ie8")){var i=c(a.companies);a.companies=b(i)}}else a.totalTime.months=f(a.totalTime.startDate,a.totalTime.endDate)+1;return a}function e(b){var c=a(b.companies);for(var e in b.companies)for(var f=parseInt(e),g=f+1;g<=c-1;g++)b.companies[f]&&b.companies[g]&&new Date(b.companies[f].endDate)>new Date(b.companies[g].endDate)&&delete b.companies[g];return d(b)}function f(a,b,c){var d;return b instanceof Date||(b=new Date(b)),a instanceof Date||(a=new Date(a)),d=12*(b.getFullYear()-a.getFullYear()),d-=void 0!==c&&"in"==c?a.getMonth()+1:a.getMonth(),d+=b.getMonth(),d<=0?0:d}function g(a){for(var b in a.companies)a.companies[b].startDate=h(a.companies[b].startDate),a.companies[b].endDate=h(a.companies[b].endDate);return a.totalTime.startDate=h(a.totalTime.startDate),a.totalTime.endDate=h(a.totalTime.endDate),a.lastUpdate=h(a.lastUpdate),a}function h(a){return"1 "+a}function i(a,b){var c=new Date(a).getMonth()?new Date(a).getFullYear()+1:new Date(a).getFullYear(),d=new Date(b).getFullYear();return{startYear:c,startMonths:f(a,"1 Jan "+c),endYear:d,endMonths:f("1 Jan "+d,b)}}function j(a,b,c){a?$("#yearGraph").append('<td class="yearBox iconDotted"><div class="yearInner '+c+'"><div class="year">&#39;'+b+'</div><em class="iconYear"></em></div></td>'):$("#yearGraph").append('<td class="iconDotted"></td>')}function k(a){$(".timelineContainer").append('<table class="timelineTable" width="100%" cellpadding="0" cellspacing="0"><tr id="yearGraph" class="yearGraph"></tr><tr id="timeline" class="timeline"></tr></table>');for(var b=i(a.totalTime.startDate,a.totalTime.endDate),c=(new Date(a.totalTime.startDate),new Date(a.totalTime.endDate),1);c<=b.startMonths;c++)j(!1);for(var c=b.startYear;c<=b.endYear;c++)if(c===b.endYear&&0===b.endMonths?j(!0,c.toString().substring(2),"rightYear"):c===b.startYear&&0===b.startMonths?j(!0,c.toString().substring(2),"leftYear"):j(!0,c.toString().substring(2)),c!=b.endYear)for(var d=0;d<11;)j(!1),d++;for(var c=a.totalTime.months-b.endMonths;c<=a.totalTime.months-1;c++)j(!1);for(var c=0;c<a.totalTime.months;c++)$("#timeline").append('<td class="timelineMonth"><span>-</span></td>');r(a)}function l(a){var b=Math.floor(a/12),c=a%12;return b>0&&c>0?b+" Year(s) "+c+" Month(s)":0===b&&c>0?c+" Month(s)":b>0&&0===c?b+" Year(s)":0===c&&0===b?"Less than a month":void 0}function m(a,b,c,d){var e="",g="",h="";a.showLastModified&&"education"==b&&(h='<div class="exp mt4"><em class="iconUpdate"></em>Profile modified on : '+timelineData.lastUpdate.substring(2)+"</div>"),void 0!==a.startDate&&void 0!==a.endDate&&n(a.startDate,a.endDate,timelineData.lastUpdate)&&(h='<div class="exp mt4"><em class="iconUpdate"></em>Profile modified on : '+timelineData.lastUpdate.substring(2)+"</div>"),void 0===a.startDate||"company"!=b&&"norecord"!=b||(e=a.startDate.split(" ")[1].substring(0,3)+" "+a.startDate.split(" ")[2]),void 0===a.endDate||"company"!=b&&"norecord"!=b||(g=a.endDate.split(" ")[1].substring(0,3)+" "+a.endDate.split(" ")[2]),(new Date).getMonth()==new Date(a.endDate).getMonth()&&(new Date).getFullYear()==new Date(a.endDate).getFullYear()&&void 0!==a.status&&(g="Present");var i=l(f(a.startDate,a.endDate));switch(b){case"education":if(d.windowWidth-$(c).offset().left<d.leftRightGap)var j='<div class="timelineTooltip tltpLeft"><div class="compName wrdWrap"><span class="bold">'+a.course+" ("+a.specialization+')</span></div><div class="compName wrdWrap">'+a.institute+'</div><div class="exp">'+a.startDate+"</div>"+h+'<em class="iconTltp arrowTopRight"></em></div>';else var j='<div class="timelineTooltip tltpRight"><div class="compName wrdWrap"><span class="bold">'+a.course+" ("+a.specialization+')</span></div><div class="compName wrdWrap">'+a.institute+'</div><div class="exp">'+a.startDate+"</div>"+h+'<em class="iconTltp arrowTopLeft"></em></div>';return j;case"company":if(d.windowWidth-$(c).offset().left<d.leftRightGap)var j='<div class="timelineTooltip tltpLeft"><div class="compName wrdWrap bold">'+a.designation+'</div><div class="compName wrdWrap">'+a.companyName+'</div><div class="exp">'+e+" - "+g+" ("+i+')</div><em class="iconTltp arrowTopRight"></em>'+h+"</div>";else var j='<div class="timelineTooltip tltpRight"><div class="compName wrdWrap bold">'+a.designation+'</div><div class="compName wrdWrap">'+a.companyName+'</div><div class="exp">'+e+" - "+g+" ("+i+')</div><em class="iconTltp arrowTopLeft"></em>'+h+"</div>";return j;case"norecord":if(d.windowWidth-$(c).offset().left<d.leftRightGap)var j='<div class="timelineTooltip tltpLeft"><div class="compName"><em class="iconTltp arrowTopRight"></em><span class="bold">Gap</span> '+e+" - "+g+" ("+i+")</div>"+h+"</div>";else var j='<div class="timelineTooltip tltpRight"><div class="compName"><em class="iconTltp arrowTopLeft"></em><span class="bold">Gap</span> '+e+" - "+g+" ("+i+")</div>"+h+"</div>";return j}}function n(a,b,c){return new Date(c)>=new Date(a)&&new Date(c)<=new Date(b)}function o(a,b,c,d,e){var f=$("#timeline").children().eq(a).css("backgroundColor",b);void 0!==d&&f.addClass(d),f.on("mouseenter",function(a){a.preventDefault(),f.append(m(c,e,this,s))}).on("mouseleave",function(a){a.preventDefault(),f.children("div").remove()})}function p(a){var b=a.getFullYear(),c=a.getMonth();switch(c){case 0:c="January";break;case 1:c="February";break;case 2:c="March";break;case 3:c="April";break;case 4:c="May";break;case 5:c="June";break;case 6:c="July";break;case 7:c="August";break;case 8:c="September";break;case 9:c="October";break;case 10:c="November";break;case 11:c="December"}return h(c+" "+b)}function q(a,b){return $("#timeline").children().eq(Math.floor((a+b)/2)).css("position","relative").append('<em class="iconEduPinSmall"></em>')}function r(a){var b=f(a.lastUpdate,a.totalTime.endDate)+1;$("#timeline").children().eq(a.totalTime.months-b).css("position","relative").append('<em class="iconLastUpdate"></em>')}var s={};window.plotTimeline=function(a){var a=e(g(a));k(a);var b=-1,c="#2CA8C2",d=[],h=0;freeTime=[];var i={};if($.each(a.companies,function(a,e){i=e,d.push(e),b++;var g=0,j=0;if(d.length>1&&(date2=new Date(d[b].startDate),date1=new Date(d[b-1].endDate),g=f(date1,date2,"in"),j=f(date2,date1),j=j>0?j+1:j,date2.valueOf()==date1.valueOf()&&(j=1)),g>3)freeTime.push({startDate:new Date(date1.setMonth(date1.getMonth()+1)),endDate:new Date(date2.setMonth(date2.getMonth()-1)),diffrenceBetween:g,startPtr:h,companyInd:d[b].index+1});else if(g<=3&&g>0)for(var k=d[b-1].endPtr,l=k;k<l+g;)o(k,d[b-1].color,d[b-1],"c"+(b-1),"company"),k++;h+=g;for(var m=h;h<m+(e.months-j);)o(h,c,e,"c"+b,"company"),h++;d[b].endPtr=h,d[b].color=c,c="#07768D"==c?"#2CA8C2":"#07768D"}),new Date(i.endDate).valueOf()!=new Date(a.totalTime.endDate).valueOf()){var j=new Date(new Date(i.endDate).setMonth(new Date(i.endDate).getMonth()+1)),l=new Date(a.totalTime.endDate);freeTime.push({startDate:j,endDate:l,diffrenceBetween:f(j,l)+1,startPtr:a.totalTime.months-(f(j,l)+1),companyInd:i.index})}s.tableOffLeft=$(".timelineTable").offset().left,s.tableWidth=$(".timelineTable").width(),s.windowWidth=window.screen.width,s.leftRightGap=s.windowWidth-(s.tableWidth-s.tableOffLeft);var m=1;$.each(freeTime,function(b,c){var d=c.startDate,e=c.endDate;if(null!==a.education&&$.each(a.education,function(b,f){if(parseInt(b)>=d.getFullYear()&&parseInt(b)<=e.getFullYear()){new Date(a.lastUpdate)>=d&&new Date(a.lastUpdate)<=e&&(f.showLastModified=!0),h=c.startPtr;var g=h;for(f.startDate=b;h<g+c.diffrenceBetween;)o(h,"#F1F1F1",f,"iconBorder edu"+m,"education"),h++;c.eduGapPlotted=!0;var i=q(g,h);$("#timeline .edu"+m).each(function(a,b){$(b).on("mouseenter",function(a){i.children("em").removeClass("iconEduPinSmall").addClass("iconEduPin")}).on("mouseleave",function(a){i.children("em").removeClass("iconEduPin").addClass("iconEduPinSmall")})});m++}}),void 0===c.eduGapPlotted){h=c.startPtr;for(var g=h;h<g+c.diffrenceBetween;)o(h,"#CF8D00",{startDate:p(c.startDate),endDate:p(c.endDate),months:f(c.startDate,c.endDate)+1},"iconStripes","norecord"),h++;c.noRecPlotted=!0}})}}();